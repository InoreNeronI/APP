"use strict";(self.webpackChunkAPP=self.webpackChunkAPP||[]).push([[638],{8638:(z,T,o)=>{o.r(T),o.d(T,{AdminModule:()=>X});var u=o(6575),m=o(451),t=o(9039),f=o(729),b=o(6834),v=o(4308),Z=o(553),_=o(2389),g=o(3252),S=o(4860),h=o(7548),d=o(8222);function O(i,c){if(1&i&&(t.TgZ(0,"th",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=c.$implicit;t.xp6(),t.hij(" ",t.lcZ(2,1,e)," ")}}function F(i,c){if(1&i&&(t.TgZ(0,"td",8),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.xp6(),t.hij(" ",e," ")}}const k=(i,c)=>["/admin/edit/",i,c];function w(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr",6),t.YNc(1,F,2,1,"td",7),t.TgZ(2,"td",8)(3,"button",9),t._UZ(4,"img",10),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteByID(s.id))}),t._UZ(8,"img",12),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA()()()}if(2&i){const e=c.$implicit,r=t.oxw(2);t.xp6(),t.Q6J("ngForOf",r.getArrayDataFromJSON(e)),t.xp6(2),t.Q6J("routerLink",t.WLB(14,k,r.currentType,e.id)),t.xp6(),t.s9C("alt",t.lcZ(5,6,"EDIT")),t.s9C("title",t.lcZ(6,8,"EDIT")),t.xp6(4),t.s9C("alt",t.lcZ(9,10,"DELETE")),t.s9C("title",t.lcZ(10,12,"DELETE"))}}function I(i,c){if(1&i&&(t.TgZ(0,"div")(1,"table",1)(2,"thead")(3,"tr",2),t.YNc(4,O,3,3,"th",3),t.TgZ(5,"th",4),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"tbody"),t.YNc(9,w,11,17,"tr",5),t.qZA()(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.getArrayFieldsFromJSON(e.data["hydra:member"][0])),t.xp6(2),t.Oqu(t.lcZ(7,5,"ACTIONS")),t.xp6(3),t.Q6J("ngForOf",e.data["hydra:member"]),t.xp6(2),t.AsE("",t.lcZ(12,7,"TOTAL_ITEMS"),": ",e.data["hydra:totalItems"],"")}}let J=(()=>{class i{constructor(e,r,n){this.http=e,this.toastr=r,this.translateService=n}getArrayDataFromJSON(e){let r=[];for(let n of this.fields)r.push(e[n]);return r}getArrayFieldsFromJSON(e=[]){return this.fields=this.internalFieldsFilter(Object.keys(e)),this.fields}internalFieldsFilter(e){const r=["@id","@type"];return e.filter(n=>r.indexOf(n)<0)}deleteByID(e){return this.http.delete(Z.N.apiUrl+"/"+this.currentType+"/"+e,{observe:"response"}).pipe((0,_.K)(r=>(this.toastr.error(r.error.error),(0,g._)(r)))).subscribe(()=>{this.toastr.success(this.translateService.instant("DELETED"));const r=this.data["hydra:member"].find(n=>n.id===e);this.data["hydra:member"].splice(this.data["hydra:member"].indexOf(r),1),this.data["hydra:totalItems"]-=1})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(S.eN),t.Y36(h._W),t.Y36(d.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-table"]],inputs:{data:"data",currentType:"currentType"},decls:1,vars:1,consts:[[4,"ngIf"],["role","table",1,"table","table-bordered"],["role","rowgroup",1,"table-row","text-center"],["role","columnheader","scope","col",4,"ngFor","ngForOf"],["role","columnheader","scope","col"],["class","table-body table-row text-center","role","rowgroup",4,"ngFor","ngForOf"],["role","rowgroup",1,"table-body","table-row","text-center"],["role","cell",4,"ngFor","ngForOf"],["role","cell"],[1,"btn","p-0",3,"routerLink"],["src","https://material-icons.github.io/material-icons/svg/edit/baseline.svg",1,"d-inline-block","align-top",3,"alt","title"],[1,"btn","ms-2","p-0",3,"click"],["src","https://material-icons.github.io/material-icons/svg/delete/baseline.svg",1,"d-inline-block","align-top",3,"alt","title"]],template:function(r,n){1&r&&t.YNc(0,I,13,9,"div",0),2&r&&t.Q6J("ngIf",n.data&&n.data["hydra:member"]&&n.data["hydra:totalItems"]>0)},dependencies:[u.sg,u.O5,m.rH,d.X$],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:20rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 992px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:15rem}}@media (max-width: 768px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:10rem}}@media (max-width: 576px){.table-body[_ngcontent-%COMP%]{border-top:unset}.table-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:20rem}}"]})}return i})();const j=i=>["/admin/new/",i];let L=(()=>{class i{constructor(e,r,n){this.subjectService=e,this.unitService=r,this.exerciseService=n}ngOnInit(){this.subjects$=this.subjectService.get(),this.units$=this.unitService.get(),this.exercises$=this.exerciseService.get(),this.currentTab="subjects",this.currentService=this.subjectService}setCurrentNav(e){this.currentTab=e.target.id}setCurrentData(){switch(this.currentTab){case"subjects":this.currentService=this.subjectService,this.subjects$=this.subjectService.get();break;case"units":this.currentService=this.unitService,this.units$=this.unitService.get();break;case"exercises":this.currentService=this.exerciseService,this.exercises$=this.exerciseService.get()}}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(f._),t.Y36(b._),t.Y36(v.z))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-admin"]],decls:28,vars:30,consts:[["role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","subjects","data-bs-toggle","tab","data-bs-target","#nav-subjects","type","button","role","tab","aria-controls","nav-subjects","aria-selected","true",1,"nav-link","active",3,"click"],["id","units","data-bs-toggle","tab","data-bs-target","#nav-units","type","button","role","tab","aria-controls","nav-units","aria-selected","false",1,"nav-link",3,"click"],["id","exercises","data-bs-toggle","tab","data-bs-target","#nav-exercises","type","button","role","tab","aria-controls","nav-exercises","aria-selected","false",1,"nav-link",3,"click"],["type","button","role","button","aria-selected","false",1,"nav-link",3,"routerLink"],["src","https://material-icons.github.io/material-icons/svg/add/baseline.svg",1,"d-inline-block","align-top",3,"alt","title"],[1,"tab-content"],["id","nav-subjects","role","tabpanel","aria-labelledby","subjects",1,"tab-pane","fade","show","active"],[3,"currentType","data"],["id","nav-units","role","tabpanel","aria-labelledby","units",1,"tab-pane","fade"],["id","nav-exercises","role","tabpanel","aria-labelledby","exercises",1,"tab-pane","fade"]],template:function(r,n){1&r&&(t.TgZ(0,"ul",0)(1,"li",1)(2,"button",2),t.NdJ("click",function(l){return n.setCurrentNav(l)}),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"li",1)(6,"button",3),t.NdJ("click",function(l){return n.setCurrentNav(l)}),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"li",1)(10,"button",4),t.NdJ("click",function(l){return n.setCurrentNav(l)}),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"li",1)(14,"button",5),t._UZ(15,"img",6),t.ALo(16,"translate"),t.ALo(17,"translate"),t.qZA()()(),t.TgZ(18,"div",7)(19,"div",8),t._UZ(20,"app-table",9),t.ALo(21,"async"),t.qZA(),t.TgZ(22,"div",10),t._UZ(23,"app-table",9),t.ALo(24,"async"),t.qZA(),t.TgZ(25,"div",11),t._UZ(26,"app-table",9),t.ALo(27,"async"),t.qZA()()),2&r&&(t.xp6(3),t.hij(" ",t.lcZ(4,12,"SUBJECTS")," "),t.xp6(4),t.hij(" ",t.lcZ(8,14,"UNITS")," "),t.xp6(4),t.hij(" ",t.lcZ(12,16,"EXERCISES")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(28,j,n.currentTab)),t.xp6(),t.s9C("alt",t.lcZ(16,18,"ADD")),t.s9C("title",t.lcZ(17,20,"ADD")),t.xp6(5),t.Q6J("currentType",n.currentTab)("data",t.lcZ(21,22,n.subjects$)),t.xp6(3),t.Q6J("currentType",n.currentTab)("data",t.lcZ(24,24,n.units$)),t.xp6(3),t.Q6J("currentType",n.currentTab)("data",t.lcZ(27,26,n.exercises$)))},dependencies:[m.rH,J,u.Ov,d.X$],encapsulation:2})}return i})();var a=o(8849);class N{static internalFieldsFilter(c){const e=["@id","@type","@context"];return c.filter(r=>e.indexOf(r)<0)}}var x=o(4438);function Y(i,c){if(1&i&&t._UZ(0,"input",9),2&i){const e=t.oxw(),r=e.$implicit,n=e.index,s=t.oxw();t.Q6J("id",r)("formControl",s.formControlsArray[n])}}function E(i,c){if(1&i&&t._UZ(0,"ejs-richtexteditor",10),2&i){const e=t.oxw().index,r=t.oxw();t.Q6J("formControl",r.formControlsArray[e])}}function U(i,c){if(1&i&&(t.TgZ(0,"div",5)(1,"label",6),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Y,1,2,"input",7)(5,E,1,1,"ejs-richtexteditor",8),t.qZA()),2&i){const e=c.$implicit,r=t.oxw();t.xp6(),t.Q6J("for",e),t.xp6(),t.Oqu(t.lcZ(3,4,e)),t.xp6(2),t.Q6J("ngIf","text"!==e),t.xp6(),t.Q6J("ngIf","units"===r.item&&"text"===e)}}let Q=(()=>{class i{constructor(e,r,n,s,l,C,A,y){this.route=e,this.subjectService=r,this.unitService=n,this.exerciseService=s,this._formBuilder=l,this.toastr=C,this.translateService=A,this._location=y,this.htmlContent="",this.formControlsArray=[],this.form=this._formBuilder.group({formControlsArray:this._formBuilder.array([])})}ngOnInit(){this.route.paramMap.subscribe(e=>{switch(this.item=e.get("item"),this.item){case"subjects":this.currentService=this.subjectService;break;case"units":this.currentService=this.unitService;break;case"exercises":this.currentService=this.exerciseService}e.get("id")&&(this.id=e.get("id")),this.currentService.getOne(this.id).subscribe(r=>{this.data=r,this.fields=N.internalFieldsFilter(Object.keys(r));for(let n of this.fields){let s=this._formBuilder.control({value:this.data[n],disabled:"id"===n},a.kI.required);this.formControlsArray.push(s),this.form.addControl(n,s)}})})}backClicked(){this._location.back()}submit(){this.currentService.edit(this.id,this.form.value).pipe((0,_.K)(e=>(this.toastr.error(e.error["hydra:description"]),(0,g._)(e)))).subscribe(()=>{this.toastr.success(this.translateService.instant("EDITED"))})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(m.gz),t.Y36(f._),t.Y36(b._),t.Y36(v.z),t.Y36(a.QS),t.Y36(h._W),t.Y36(d.sK),t.Y36(u.Ye))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-new-item"]],decls:9,vars:8,consts:[[1,"mb-3",3,"formGroup"],["class","mt-2",4,"ngFor","ngForOf"],[1,"form-actions","mt-3","text-center"],["type","submit",1,"btn","btn-outline-primary","me-3",3,"click"],[1,"btn","btn-outline",3,"click"],[1,"mt-2"],["role","button",1,"form-label",3,"for"],["type","text","class","form-control",3,"id","formControl",4,"ngIf"],[3,"formControl",4,"ngIf"],["type","text",1,"form-control",3,"id","formControl"],[3,"formControl"]],template:function(r,n){1&r&&(t.TgZ(0,"form",0),t.YNc(1,U,6,6,"div",1),t.TgZ(2,"div",2)(3,"button",3),t.NdJ("click",function(){return n.submit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.backClicked()}),t._uU(7),t.ALo(8,"translate"),t.qZA()()()),2&r&&(t.Q6J("formGroup",n.form),t.xp6(),t.Q6J("ngForOf",n.fields),t.xp6(3),t.Oqu(t.lcZ(5,4,"SAVE")),t.xp6(3),t.Oqu(t.lcZ(8,6,"GO_BACK")))},dependencies:[u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,x.YI,d.X$],encapsulation:2})}return i})();function D(i,c){if(1&i&&t._UZ(0,"input",9),2&i){const e=t.oxw(),r=e.$implicit,n=e.index,s=t.oxw();t.Q6J("id",r)("formControl",s.formControlsArray[n])}}function $(i,c){if(1&i&&t._UZ(0,"ejs-richtexteditor",10),2&i){const e=t.oxw().index,r=t.oxw();t.Q6J("formControl",r.formControlsArray[e])}}function B(i,c){if(1&i&&(t.TgZ(0,"div",5)(1,"label",6),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,D,1,2,"input",7)(5,$,1,1,"ejs-richtexteditor",8),t.qZA()),2&i){const e=c.$implicit,r=t.oxw();t.xp6(),t.Q6J("for",e),t.xp6(),t.Oqu(t.lcZ(3,4,e)),t.xp6(2),t.Q6J("ngIf","text"!==e),t.xp6(),t.Q6J("ngIf","units"===r.item&&"text"===e)}}let q=(()=>{class i{constructor(e,r,n,s,l,C,A,y){this.route=e,this.subjectService=r,this.unitService=n,this.exerciseService=s,this._formBuilder=l,this.toastr=C,this.translateService=A,this._location=y,this.formControlsArray=[],this.form=this._formBuilder.group({formControlsArray:this._formBuilder.array([])})}ngOnInit(){this.route.paramMap.subscribe(e=>{switch(this.item=e.get("item"),this.item){case"subjects":this.currentService=this.subjectService,this.fields=["name","course"];break;case"units":this.currentService=this.unitService,this.fields=["title","text","subject"];break;case"exercises":this.currentService=this.exerciseService,this.fields=["title","question","answer","unit"]}for(let r of this.fields){let n=this._formBuilder.control("",a.kI.required);this.formControlsArray.push(n),this.form.addControl(r,n)}})}backClicked(){this._location.back()}submit(){this.currentService.add(this.form.value).pipe((0,_.K)(e=>(this.toastr.error(e.error["hydra:description"]),(0,g._)(e)))).subscribe(()=>{this.toastr.success(this.translateService.instant("ADDED"))})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(m.gz),t.Y36(f._),t.Y36(b._),t.Y36(v.z),t.Y36(a.QS),t.Y36(h._W),t.Y36(d.sK),t.Y36(u.Ye))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-new-item"]],decls:9,vars:8,consts:[[1,"mb-3",3,"formGroup"],["class","mt-2",4,"ngFor","ngForOf"],[1,"form-actions","mt-3","text-center"],["type","submit",1,"btn","btn-outline-primary","me-3",3,"click"],[1,"btn","btn-outline",3,"click"],[1,"mt-2"],["role","button",1,"form-label",3,"for"],["type","text","class","form-control",3,"id","formControl",4,"ngIf"],[3,"formControl",4,"ngIf"],["type","text",1,"form-control",3,"id","formControl"],[3,"formControl"]],template:function(r,n){1&r&&(t.TgZ(0,"form",0),t.YNc(1,B,6,6,"div",1),t.TgZ(2,"div",2)(3,"button",3),t.NdJ("click",function(){return n.submit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.backClicked()}),t._uU(7),t.ALo(8,"translate"),t.qZA()()()),2&r&&(t.Q6J("formGroup",n.form),t.xp6(),t.Q6J("ngForOf",n.fields),t.xp6(3),t.Oqu(t.lcZ(5,4,"SAVE")),t.xp6(3),t.Oqu(t.lcZ(8,6,"GO_BACK")))},dependencies:[u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,x.YI,d.X$],encapsulation:2})}return i})();var M=o(1670),P=o(3721);let p=(()=>{class i{constructor(e,r,n,s){this.auth=e,this.router=r,this.toastr=n,this.translateService=s}canActivate(e,r){var n=this;return(0,M.Z)(function*(){return!!n.auth.isAdmin()||(n.auth.isUser()?(n.toastr.error(n.translateService.instant("FORBIDDEN")),!1):(n.toastr.info(n.translateService.instant("LOGIN_PLEASE")),yield n.router.navigate(["/auth"],{queryParams:{returnUrl:r.url}}),!1))})()}static#t=this.\u0275fac=function(r){return new(r||i)(t.LFG(P.e),t.LFG(m.F0),t.LFG(h._W),t.LFG(d.sK))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac})}return i})();const G=[{path:"",component:L,canActivate:[p]},{path:"new/:item",component:q,canActivate:[p]},{path:"edit/:item/:id",component:Q,canActivate:[p]}];let K=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(G),m.Bz]})}return i})(),X=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({providers:[p],imports:[u.ez,K,d.aw,a.u5,a.UX,x.gGx]})}return i})()}}]);
//# sourceMappingURL=638.121de2fef8e86448.js.map