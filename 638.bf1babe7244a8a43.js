"use strict";(self.webpackChunkAPP=self.webpackChunkAPP||[]).push([[638],{8638:(z,Z,o)=>{o.r(Z),o.d(Z,{AdminModule:()=>X});var u=o(6575),m=o(451),t=o(9039),f=o(729),b=o(6834),v=o(4308),y=o(553),g=o(2389),_=o(3252),S=o(4860),h=o(7548),d=o(8222);function k(r,c){if(1&r&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const e=c.$implicit;t.xp6(),t.hij(" ",t.lcZ(2,1,e)," ")}}function O(r,c){if(1&r&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&r){const e=c.$implicit;t.xp6(),t.hij(" ",e," ")}}const F=(r,c)=>["/admin/edit/",r,c];function w(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"tr",8),t.YNc(1,O,2,1,"td",9),t.TgZ(2,"td",10)(3,"button",11),t._UZ(4,"img",12),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteByID(s.id))}),t._UZ(8,"img",14),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA()()()}if(2&r){const e=c.$implicit,i=t.oxw(2);t.xp6(),t.Q6J("ngForOf",i.getArrayDataFromJSON(e)),t.xp6(2),t.Q6J("routerLink",t.WLB(14,F,i.currentType,e.id)),t.xp6(),t.s9C("alt",t.lcZ(5,6,"EDIT")),t.s9C("title",t.lcZ(6,8,"EDIT")),t.xp6(4),t.s9C("alt",t.lcZ(9,10,"DELETE")),t.s9C("title",t.lcZ(10,12,"DELETE"))}}function J(r,c){if(1&r&&(t.TgZ(0,"div")(1,"table",3)(2,"thead")(3,"tr",4),t.YNc(4,k,3,3,"th",5),t.TgZ(5,"th",6),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"tbody"),t.YNc(9,w,11,17,"tr",7),t.qZA()(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA()()),2&r){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.getArrayFieldsFromJSON(e.data["hydra:member"][0])),t.xp6(2),t.Oqu(t.lcZ(7,5,"ACTIONS")),t.xp6(3),t.Q6J("ngForOf",e.data["hydra:member"]),t.xp6(2),t.AsE("",t.lcZ(12,7,"TOTAL_ITEMS"),": ",e.data["hydra:totalItems"],"")}}const I=r=>["/admin/new/",r];let N=(()=>{class r{constructor(e,i,n){this.http=e,this.toastr=i,this.translateService=n}getArrayDataFromJSON(e){let i=[];for(let n of this.fields)i.push(e[n]);return i}getArrayFieldsFromJSON(e=[]){return this.fields=this.internalFieldsFilter(Object.keys(e)),this.fields}internalFieldsFilter(e){const i=["@id","@type"];return e.filter(n=>i.indexOf(n)<0)}deleteByID(e){return this.http.delete(y.N.apiUrl+"/"+this.currentType+"/"+e,{observe:"response"}).pipe((0,g.K)(i=>(this.toastr.error(i.error.error),(0,_._)(i)))).subscribe(()=>{this.toastr.success(this.translateService.instant("DELETED"));const i=this.data["hydra:member"].find(n=>n.id===e);this.data["hydra:member"].splice(this.data["hydra:member"].indexOf(i),1),this.data["hydra:totalItems"]-=1})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(S.eN),t.Y36(h._W),t.Y36(d.sK))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-table"]],inputs:{data:"data",currentType:"currentType"},decls:5,vars:10,consts:[[1,"btn",3,"routerLink"],["src","https://material-icons.github.io/material-icons/svg/add/baseline.svg",1,"d-inline-block","align-top",3,"alt","title"],[4,"ngIf"],["role","table",1,"table","table-bordered"],["role","rowgroup",1,"table-row","text-center"],["role","columnheader","scope","col",4,"ngFor","ngForOf"],["role","columnheader","scope","col"],["class","table-body table-row text-center","role","rowgroup",4,"ngFor","ngForOf"],["role","rowgroup",1,"table-body","table-row","text-center"],["role","cell",4,"ngFor","ngForOf"],["role","cell"],[1,"btn","p-0",3,"routerLink"],["src","https://material-icons.github.io/material-icons/svg/edit/baseline.svg",1,"d-inline-block","align-top",3,"alt","title"],[1,"btn","ms-2","p-0",3,"click"],["src","https://material-icons.github.io/material-icons/svg/delete/baseline.svg",1,"d-inline-block","align-top",3,"alt","title"]],template:function(i,n){1&i&&(t.TgZ(0,"button",0),t._UZ(1,"img",1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.YNc(4,J,13,9,"div",2)),2&i&&(t.Q6J("routerLink",t.VKq(8,I,n.currentType)),t.xp6(),t.s9C("alt",t.lcZ(2,4,"ADD")),t.s9C("title",t.lcZ(3,6,"ADD")),t.xp6(3),t.Q6J("ngIf",n.data&&n.data["hydra:member"]&&n.data["hydra:totalItems"]>0))},dependencies:[u.sg,u.O5,m.rH,d.X$],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:20rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 992px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:15rem}}@media (max-width: 768px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:10rem}}@media (max-width: 576px){.table-body[_ngcontent-%COMP%]{border-top:unset}.table-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:20rem}}"]})}return r})(),L=(()=>{class r{constructor(e,i,n){this.subjectService=e,this.unitService=i,this.exerciseService=n}ngOnInit(){this.subjects$=this.subjectService.get(),this.units$=this.unitService.get(),this.exercises$=this.exerciseService.get(),this.currentTab="subjects",this.currentService=this.subjectService}setCurrentNav(e){this.currentTab=e.target.id}setCurrentData(){switch(this.currentTab){case"subjects":this.currentService=this.subjectService,this.subjects$=this.subjectService.get();break;case"units":this.currentService=this.unitService,this.units$=this.unitService.get();break;case"exercises":this.currentService=this.exerciseService,this.exercises$=this.exerciseService.get()}}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(f._),t.Y36(b._),t.Y36(v.z))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-admin"]],decls:21,vars:27,consts:[["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","subjects","data-bs-toggle","tab","href","#nav-subjects","role","tab","aria-controls","nav-subjects","aria-selected","true",1,"nav-link",3,"click"],["id","units","data-bs-toggle","tab","href","#nav-units","role","tab","aria-controls","nav-units","aria-selected","false",1,"nav-link",3,"click"],["id","exercises","data-bs-toggle","tab","href","#nav-exercises","role","tab","aria-controls","nav-exercises","aria-selected","false",1,"nav-link",3,"click"],["id","nav-tabContent",1,"tab-content"],["id","nav-subjects","role","tabpanel",1,"tab-pane","fade","show","active"],[3,"currentType","data"],["id","nav-units","role","tabpanel",1,"tab-pane","fade"],["id","nav-exercises","role","tabpanel",1,"tab-pane","fade"]],template:function(i,n){1&i&&(t.TgZ(0,"nav")(1,"div",0)(2,"a",1),t.NdJ("click",function(l){return n.setCurrentNav(l)}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",2),t.NdJ("click",function(l){return n.setCurrentNav(l)}),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"a",3),t.NdJ("click",function(l){return n.setCurrentNav(l)}),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",4)(12,"div",5),t._UZ(13,"app-table",6),t.ALo(14,"async"),t.qZA(),t.TgZ(15,"div",7),t._UZ(16,"app-table",6),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"div",8),t._UZ(19,"app-table",6),t.ALo(20,"async"),t.qZA()()),2&i&&(t.xp6(2),t.ekj("active","subjects"===n.currentTab),t.xp6(),t.hij(" ",t.lcZ(4,15,"SUBJECTS")," "),t.xp6(2),t.ekj("active","units"===n.currentTab),t.xp6(),t.hij(" ",t.lcZ(7,17,"UNITS")," "),t.xp6(2),t.ekj("active","exercises"===n.currentTab),t.xp6(),t.hij(" ",t.lcZ(10,19,"EXERCISES")," "),t.xp6(4),t.Q6J("currentType",n.currentTab)("data",t.lcZ(14,21,n.subjects$)),t.xp6(3),t.Q6J("currentType",n.currentTab)("data",t.lcZ(17,23,n.units$)),t.xp6(3),t.Q6J("currentType",n.currentTab)("data",t.lcZ(20,25,n.exercises$)))},dependencies:[N,u.Ov,d.X$],encapsulation:2})}return r})();var a=o(8849);class j{static internalFieldsFilter(c){const e=["@id","@type","@context"];return c.filter(i=>e.indexOf(i)<0)}}var x=o(6070);function E(r,c){if(1&r&&t._UZ(0,"input",9),2&r){const e=t.oxw(),i=e.$implicit,n=e.index,s=t.oxw();t.Q6J("id",i)("formControl",s.formControlsArray[n])}}function Y(r,c){if(1&r&&t._UZ(0,"angular-editor",10),2&r){const e=t.oxw().index,i=t.oxw();t.Q6J("formControl",i.formControlsArray[e])("config",i.config)}}function U(r,c){if(1&r&&(t.TgZ(0,"div",5)(1,"label",6),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,E,1,2,"input",7)(5,Y,1,2,"angular-editor",8),t.qZA()),2&r){const e=c.$implicit,i=t.oxw();t.xp6(),t.Q6J("for",e),t.xp6(),t.Oqu(t.lcZ(3,4,e)),t.xp6(2),t.Q6J("ngIf","text"!==e),t.xp6(),t.Q6J("ngIf","units"===i.item&&"text"===e)}}let Q=(()=>{class r{constructor(e,i,n,s,l,T,C,A){this.route=e,this.subjectService=i,this.unitService=n,this.exerciseService=s,this._formBuilder=l,this.toastr=T,this.translateService=C,this._location=A,this.htmlContent="",this.config={editable:!0,minHeight:"5rem",translate:"no",defaultParagraphSeparator:"p",defaultFontName:"Arial",toolbarHiddenButtons:[["bold"]],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}]},this.formControlsArray=[],this.form=this._formBuilder.group({formControlsArray:this._formBuilder.array([])})}ngOnInit(){this.route.paramMap.subscribe(e=>{switch(this.item=e.get("item"),this.item){case"subjects":this.currentService=this.subjectService;break;case"units":this.currentService=this.unitService;break;case"exercises":this.currentService=this.exerciseService}e.get("id")&&(this.id=e.get("id")),this.currentService.getOne(this.id).subscribe(i=>{this.data=i,this.fields=j.internalFieldsFilter(Object.keys(i));for(let n of this.fields){let s=this._formBuilder.control({value:this.data[n],disabled:"id"===n},a.kI.required);this.formControlsArray.push(s),this.form.addControl(n,s)}})})}backClicked(){this._location.back()}submit(){this.currentService.edit(this.id,this.form.value).pipe((0,g.K)(e=>(this.toastr.error(e.error["hydra:description"]),(0,_._)(e)))).subscribe(()=>{this.toastr.success(this.translateService.instant("EDITED"))})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(m.gz),t.Y36(f._),t.Y36(b._),t.Y36(v.z),t.Y36(a.QS),t.Y36(h._W),t.Y36(d.sK),t.Y36(u.Ye))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-new-item"]],decls:9,vars:8,consts:[[1,"mb-3",3,"formGroup"],["class","mt-2",4,"ngFor","ngForOf"],[1,"form-actions","mt-3","text-center"],["type","submit",1,"btn","btn-outline-primary","me-3",3,"click"],[1,"btn","btn-outline",3,"click"],[1,"mt-2"],["role","button",1,"form-label",3,"for"],["type","text","class","form-control",3,"id","formControl",4,"ngIf"],[3,"formControl","config",4,"ngIf"],["type","text",1,"form-control",3,"id","formControl"],[3,"formControl","config"]],template:function(i,n){1&i&&(t.TgZ(0,"form",0),t.YNc(1,U,6,6,"div",1),t.TgZ(2,"div",2)(3,"button",3),t.NdJ("click",function(){return n.submit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.backClicked()}),t._uU(7),t.ALo(8,"translate"),t.qZA()()()),2&i&&(t.Q6J("formGroup",n.form),t.xp6(),t.Q6J("ngForOf",n.fields),t.xp6(3),t.Oqu(t.lcZ(5,4,"SAVE")),t.xp6(3),t.Oqu(t.lcZ(8,6,"GO_BACK")))},dependencies:[u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,x.s6,d.X$],encapsulation:2})}return r})();function D(r,c){if(1&r&&t._UZ(0,"input",9),2&r){const e=t.oxw(),i=e.$implicit,n=e.index,s=t.oxw();t.Q6J("id",i)("formControl",s.formControlsArray[n])}}function q(r,c){if(1&r&&t._UZ(0,"angular-editor",10),2&r){const e=t.oxw().index,i=t.oxw();t.Q6J("formControl",i.formControlsArray[e])("config",i.config)}}function B(r,c){if(1&r&&(t.TgZ(0,"div",5)(1,"label",6),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,D,1,2,"input",7)(5,q,1,2,"angular-editor",8),t.qZA()),2&r){const e=c.$implicit,i=t.oxw();t.xp6(),t.Q6J("for",e),t.xp6(),t.Oqu(t.lcZ(3,4,e)),t.xp6(2),t.Q6J("ngIf","text"!==e),t.xp6(),t.Q6J("ngIf","units"===i.item&&"text"===e)}}let $=(()=>{class r{constructor(e,i,n,s,l,T,C,A){this.route=e,this.subjectService=i,this.unitService=n,this.exerciseService=s,this._formBuilder=l,this.toastr=T,this.translateService=C,this._location=A,this.formControlsArray=[],this.config={editable:!0,minHeight:"5rem",translate:"no",defaultParagraphSeparator:"p",defaultFontName:"Arial",toolbarHiddenButtons:[["bold"]],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}]},this.form=this._formBuilder.group({formControlsArray:this._formBuilder.array([])})}ngOnInit(){this.route.paramMap.subscribe(e=>{switch(this.item=e.get("item"),this.item){case"subjects":this.currentService=this.subjectService,this.fields=["name","course"];break;case"units":this.currentService=this.unitService,this.fields=["title","text","subject"];break;case"exercises":this.currentService=this.exerciseService,this.fields=["title","question","answer","unit"]}for(let i of this.fields){let n=this._formBuilder.control("",a.kI.required);this.formControlsArray.push(n),this.form.addControl(i,n)}})}backClicked(){this._location.back()}submit(){this.currentService.add(this.form.value).pipe((0,g.K)(e=>(this.toastr.error(e.error["hydra:description"]),(0,_._)(e)))).subscribe(()=>{this.toastr.success(this.translateService.instant("ADDED"))})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(m.gz),t.Y36(f._),t.Y36(b._),t.Y36(v.z),t.Y36(a.QS),t.Y36(h._W),t.Y36(d.sK),t.Y36(u.Ye))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-new-item"]],decls:9,vars:8,consts:[[1,"mb-3",3,"formGroup"],["class","mt-2",4,"ngFor","ngForOf"],[1,"form-actions","mt-3","text-center"],["type","submit",1,"btn","btn-outline-primary","me-3",3,"click"],[1,"btn","btn-outline",3,"click"],[1,"mt-2"],["role","button",1,"form-label",3,"for"],["type","text","class","form-control",3,"id","formControl",4,"ngIf"],[3,"formControl","config",4,"ngIf"],["type","text",1,"form-control",3,"id","formControl"],[3,"formControl","config"]],template:function(i,n){1&i&&(t.TgZ(0,"form",0),t.YNc(1,B,6,6,"div",1),t.TgZ(2,"div",2)(3,"button",3),t.NdJ("click",function(){return n.submit()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.backClicked()}),t._uU(7),t.ALo(8,"translate"),t.qZA()()()),2&i&&(t.Q6J("formGroup",n.form),t.xp6(),t.Q6J("ngForOf",n.fields),t.xp6(3),t.Oqu(t.lcZ(5,4,"SAVE")),t.xp6(3),t.Oqu(t.lcZ(8,6,"GO_BACK")))},dependencies:[u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.oH,a.sg,x.s6,d.X$],encapsulation:2})}return r})();var M=o(1670),P=o(3721);let p=(()=>{class r{constructor(e,i,n,s){this.auth=e,this.router=i,this.toastr=n,this.translateService=s}canActivate(e,i){var n=this;return(0,M.Z)(function*(){return!!n.auth.isAdmin()||(n.auth.isUser()?(n.toastr.error(n.translateService.instant("FORBIDDEN")),!1):(n.toastr.info(n.translateService.instant("LOGIN_PLEASE")),yield n.router.navigate(["/auth"],{queryParams:{returnUrl:i.url}}),!1))})()}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(P.e),t.LFG(m.F0),t.LFG(h._W),t.LFG(d.sK))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac})}return r})();const G=[{path:"",component:L,canActivate:[p]},{path:"new/:item",component:$,canActivate:[p]},{path:"edit/:item/:id",component:Q,canActivate:[p]}];let K=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(G),m.Bz]})}return r})(),X=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({providers:[p],imports:[u.ez,K,d.aw,a.u5,a.UX,x.UM]})}return r})()}}]);
//# sourceMappingURL=638.bf1babe7244a8a43.js.map